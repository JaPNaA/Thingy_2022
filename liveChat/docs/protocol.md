# Protocol

This document outlines the protocol between the server and clients.

## Definitions

- responds
    - when the server "responds", it sends a message to the same client that sent a message to the server
- rest-broadcasts
    - when the server "rest-broadcasts", it sends a message to all clients subscribed to the same channel other than the client that sent the message.

## Events

### Begin typing

When a client joins a chat, the following happen:

- client sends `new:{inital message}`
    - initial message is the message that the client first enters. It's usually a single character when typing, but could be longer if text is pasted
- server responds `newId:{message id}` and rest-broadcasts `new:{message id}:{inital message}`
    - message id is the id of the message generated by the server

### Sends a message

When a client sends a message, the following happens:

- client sends `send:{message id}:{final message}`
    - message id is the message id recieved from sending "new:"
    - the final message is the final message the client intends to send
- server rest-broadcasts `send:{message id}:{final message}`
